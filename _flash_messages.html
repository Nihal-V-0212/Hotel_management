{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="flash-messages">
        {% for category, message in messages %}
            {% set alert_class = 'alert-' + (category if category in ['primary', 'secondary', 'success', 'danger', 'warning', 'info', 'light', 'dark'] else 'info') %}
            <div class="alert {{ alert_class }}" role="alert">
                {{ message }}
            </div>
        {% endfor %}
        </div>
    {% endif %}
{% endwith %}